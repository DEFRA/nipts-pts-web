/*!
 * ------------------------------------------- START OF THIRD PARTY NOTICE -----------------------------------------
 * 
 * This file is based on or incorporates material from the projects listed below (Third Party IP). The original copyright notice and the license under which Microsoft received such Third Party IP, are set forth below. Such licenses and notices are provided for informational purposes only. Microsoft licenses the Third Party IP to you under the licensing terms for the Microsoft product. Microsoft reserves all other rights not expressly granted under this agreement, whether by implication, estoppel or otherwise.
 * 
 *   json2.js (2016-05-01)
 *   https://github.com/douglascrockford/JSON-js
 *   License: Public Domain
 * 
 * Provided for Informational Purposes Only
 * 
 * ----------------------------------------------- END OF THIRD PARTY NOTICE ------------------------------------------
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{467:function(e,n,o){var i=o(1),t=o(5),s=o(2),r=o(0),l=o(16),a=o(30),d=o(3),c=o(4),p=o(482),u=o(28),g=o(12),v=o(8),S=o(7);var T=window,h=d.String,f=t.SessionPollingType,m=s.TrustedDeviceDisplayOptions,b=s.EndAuthRequestData,C=t.EstsError,_=p.NonRetryableError;function x(e){var n=this,o=null,t=1,r=null,d={},u=e.serverData,x=e.sentProof.proof,A=e.sessionApprovalError,w=e.pollingType,P=e.showCancelButton,k=e.sessionIdentifier,y=e.username,I=e.supportsBack,R=e.isInitialState,O=e.currentPollStartTime,D=e.currentPollEndTime,E=e.trustedDeviceCheckboxConfig,B=e.twoWayPollingNeeded,F=e.flowToken,M=e.entropy,N=u.str,L=u.urlSkipSA,V=u.sDisplaySessionId,q=u.urlEndAuth,U=u.iPollingInterval,H=u.iPollingTimeout,K=u.iPollingBackoffInterval,W=u.oPerAuthPollingInterval,J=u.sCtx,j=u.dynamicTenantBranding,z=u.staticTenantBranding,G=u.arrUserProofs,Q=u.sSiteId,X=u.sClientId,Y=u.sForwardedClientId,Z=u.sNoPaBubbleVersion,$=u.fShowOnlyResourceTenantBranding,ee=u.fDisplayCompanionApp,ne=u.fUpdateSessionPollingLogic,oe=u.fSasEndAuthPostToGetSwitch,ie=u.fActivateKeyboardFocusOnApprovalNumber,te=u.fRestartPollingOnFocus;function se(){return new v((function(e,o){var i=null,a=null,d=null;oe?(a={},(d=[]).push([b.authMethodId,x.authMethodId]),d.push([b.pollCount,t++]),r&&(d.push([b.lastPollStart,r.startTime]),d.push([b.lastPollEnd,r.endTime])),a[b.msSessionId]=k,a[b.msFlowToken]=n.flowToken(),a[b.ctx]=J):(i={Method:"EndAuth",SessionId:k,FlowToken:n.flowToken(),Ctx:J,AuthMethodId:x.authMethodId,PollCount:t++},r&&(i.LastPollStart=r.startTime,i.LastPollEnd=r.endTime)),(new l).Json({url:q,eventId:S.EventIds.Api_EndSessionApproval},i,(function(n,o){r=o,e(n)}),(function(e,n){r=n,o(e)}),s.EndAuthRequestTimeout,a,d)})).then(re)}function re(e){var o=e.FlowToken;if(e.Success)return n.onUpdateFlowToken(o),!0;if(n.flowToken(o),n.onUpdateFlowToken(o),e.Retry)return!1;throw new _("endAuthError",e)}function le(e){if(e instanceof _)if("timeout"===e.errorCode)n.sessionPollingField_onSessionTimeOut();else if("endAuthError"===e.errorCode){var o=e.errorData;d={errorCode:o.ErrCode,timestamp:o.Timestamp};var i=function(e){var n=null;switch(e){case C.PhoneAppNoResponse:n=x.str.CT_SAOTCC_STR_Error_PhoneAppNoResponse,A="timeout";break;case C.PhoneAppInvalidResult:n=x.str.CT_SAOTCC_STR_Error_PhoneAppInvalidResult,A=M?"upgrade":"timeout";break;case C.AppLockRequiredButNotUsed:n=x.str.CT_SAOTCC_STR_AuthenticatorError_Description,A="secure";break;case C.IncompatibleAppVersion:n=x.str.CT_SAOTCC_STR_Error_PhoneAppInvalidResult,A="upgrade";break;case C.PhoneAppDenied:case C.PhoneAppFraudReported:case C.PhoneAppEntropyIncorrect:case C.UserIsBlocked:default:n=x.str.CT_SAOTCC_STR_Error_PhoneAppDenied,A="deny"}return n}(o.ResultValue);o.ResultValue===C.UserAuthFailedDuplicateRequest?n.onSwitchView(s.PageState.SessionApprovalPolling):i&&n.onSwitchView(s.PageState.SessionApprovalTimeout)}}function ae(e){ce(!1),n.sessionIdentifier=k=e.getSessionKey(),n.onUpdateSessionIdentifier(n.sessionIdentifier),n.doPolling(!0)}function de(){ce(!1),A="sendFail"}function ce(e){n.isSending=e,n.onSetPendingRequest(e),n.focused(!e)}n.onSubmitReady=c.create(),n.onSwitchView=c.create(),n.onCancel=c.create(),n.onUpdateSessionIdentifier=c.create(),n.onUpdateFlowToken=c.create(),n.onSetPendingRequest=c.create(),n.username=y,n.spinnerText=null,n.title=null,n.description=null,n.description2=null,n.enterSecurityCodeText=null,n.descriptionSessionText=null,n.tdCheckbox=null,n.tenantBranding=null,n.showSwitchProofsLink=!1,n.twoWayPollingNeeded=B,n.displaySign=M,n.toggleText=null,n.isEntropy=!1,n.isCompanionApp=ee&&x.type===PROOF.Type.CompanionApp,n.skipUrl=L,n.showCancelButton=P,n.pollingType=w||f.Image,n.sessionIdentifier=k,n.isInitialState=R,n.showHelp=i.observable(!1),n.showResend=i.observable(!1),n.doPolling=i.observable(!1),n.currentPollStartTime=i.observable(O),n.currentPollEndTime=i.observable(D),n.sessionPollingInterface=i.observable(null),n.focused=i.observable(!1).extend({notify:"always"}),n.showTileLogo=i.observable(!1),n.flowToken=i.observable(F).extend({flowTokenUpdate:u}),n.focusOnSign=i.observable(ie&&!!M),n.toggleHelp=function(){n.showHelp(!n.showHelp())},n.switchToOtcRequest_onClick=function(){n.onSwitchView(s.PageState.OtcRequest)},n.switchToOtcConfirm_onClick=function(){n.onSwitchView(s.PageState.OtcConfirm)},n.dispose=function(){o&&o.stopPolling()},n.saveSharedData=function(e){e.sessionApprovalError=A,e.sessionIdentifier=n.sessionIdentifier,e.flowToken=n.flowToken(),e.debugDetails=d},n.getState=function(){},n.restoreState=function(){},n.setDefaultFocus=function(){n.focused(!0)},n.startRequest=function(){if(!n.isSending){ce(!0);var e={username:y,proofData:x.data,proofType:x.type,flowToken:n.flowToken(),uiMode:53,siteId:Q,clientId:X,forwardedClientId:Y,noPaBubbleVersion:Z,successCallback:ae,failureCallback:de};new a(e).sendRequest()}},n.secondaryButton_onClick=function(){I&&n.showSwitchProofsLink?n.onSwitchView(R?s.PageState.OtcRequest:s.PageState.Previous):n.onCancel()},n.sessionPollingField_onLoad=function(){n.sessionPollingInterface().startPolling()},n.sessionPollingField_onSessionTimeOut=function(){A="timeout",n.onSwitchView(s.PageState.SessionApprovalTimeout)},n.sessionPollingField_onSessionDenied=function(){A="deny",n.onSwitchView(s.PageState.SessionApprovalTimeout)},n.sessionPollingField_onSessionApproved=function(){n.onSubmitReady()},n.tileLogo_onLoad=function(){n.showTileLogo(!0)},function(){n.tenantBranding=g.loadTenantBranding($?z:j),n.toggleText=N.CT_SAOTCC_STR_Toggle;var e=h.format(N.CT_SAOTCAS_STR_Title,V),t=h.format(N.CT_SAOTCAS_STR_Description,V),s=null;x&&(n.enterSecurityCodeText=x.type===PROOF.Type.TOTPAuthenticator?N.CT_SAOTCAS_STR_TOTP_Both:N.CT_SAOTCAS_STR_TOTP,ee?x.type!==PROOF.Type.TOTPAuthenticatorV2&&x.type!==PROOF.Type.CompanionApp||(n.toggleText=x.str.CT_SAOTCC_STR_Toggle):x.type===PROOF.Type.TOTPAuthenticatorV2&&(n.toggleText=x.str.CT_SAOTCC_STR_Toggle),x.isLocationAware?(e=N.CT_SAOTCAS_STR_Title_LocationAware,t=N.CT_SAOTCAS_STR_Description_LocationAware,s=M?N.CT_SAOTCRC_STR_Polling_PageDescription:null):M?(t=n.isCompanionApp?N.CT_SAOTCRC_STR_Polling_PageDescription_Outlook:N.CT_SAOTCRC_STR_Polling_PageDescription,n.isEntropy=!0):n.isCompanionApp&&(t=h.format(N.CT_SAOTCAS_STR_Description_Outlook,V))),n.title=e,n.description=t,n.description2=s,n.spinnerText=h.format(N.CT_SAOTCAS_STR_SpinnerText,V),n.descriptionSessionText=N.CT_SAOTCAS_STR_DescriptionSessionText?h.format(N.CT_SAOTCAS_STR_DescriptionSessionText,V):null,n.showSwitchProofsLink=G&&G.length>1,n.tdCheckbox={isShown:E<m.HideAndCheck,isChecked:E===(m.ShowAndCheck||m.DisableAndCheck||m.HideAndCheck),isDisabled:E===m.DisableAndCheck},q&&n.twoWayPollingNeeded?(o=new p({apiRequestCallBack:se,pollingIntervalMilliseconds:1e3*(W[x.authMethodId]||U/1e3),pollingBackoffInterval:K,pollingTimeoutMilliseconds:H,updateSessionPollingLogic:ne,restartPollingOnFocus:te})).pollAsync().then(n.sessionPollingField_onSessionApproved,le):(A||!n.sessionIdentifier?n.startRequest():n.doPolling(!0),te&&i.utils.registerEventHandler(T,"focus",(function(){o&&!o.isPolling()&&(o.stopPolling(),o.pollAsync().then(n.sessionPollingField_onSessionApproved,le))})))}()}u.applyExtenders(i),i.components.register("session-approval-view",{viewModel:x,template:o(535),synchronous:!T.ServerData.iMaxStackForKnockoutAsyncComponents||r.Helper.isStackSizeGreaterThan(T.ServerData.iMaxStackForKnockoutAsyncComponents),enableExtensions:!0}),e.exports=x},482:function(e,n,o){var i=o(3),t=o(8),s=i.DateTime;function r(e){var n=this,o=e.apiRequestCallBack,i=e.pollingIntervalMilliseconds||1e3,l=e.pollingBackoffInterval||1,a=e.maxPollErrors||5,d=e.pollingTimeoutMilliseconds||6e4,c=e.updateSessionPollingLogic,p=e.restartPollingOnFocus,u=0,g=0,v=0,S=0,T=null,h=null,f=null,m=null;n.pollAsync=function(){return u=0,v=2*(g=i),f=s.getCurrentTime()+g,m=s.getCurrentTime()+v,new t((function(e,t){var b=Math.floor(i/10),C=!1;T=setInterval((function(){var i=s.getCurrentTime();p&&(S=i),(!C&&i>=f||c&&i>=m)&&(C=!0,f=i+g,m=i+v,g*=l,o().then((function(o){o&&(n.stopPolling(),e(!0)),C=!1}),(function(e){(!(e instanceof r.RetryableError)||++u>=a)&&(u>=a&&(e=new r.NonRetryableError("maxRetryableErrors")),n.stopPolling(),t(e)),C=!1})))}),b),h=setTimeout((function(){n.stopPolling(),t(new r.NonRetryableError("timeout"))}),d)}))},n.stopPolling=function(){clearInterval(T),clearTimeout(h),T=null,h=null},n.isPolling=function(){var e=s.getCurrentTime();return S&&e-S<=i/10}}r.RetryableError=function(e,n){this.name="RetryableError",this.errorCode=e,this.errorData=n,this.message="Retryable polling error: "+e,this.stack=(new Error).stack},r.RetryableError.prototype=new Error,r.NonRetryableError=function(e,n){this.name="NonRetryableError",this.errorCode=e,this.errorData=n,this.message="Non-retryable polling error: "+e,this.stack=(new Error).stack},r.NonRetryableError.prototype=new Error,e.exports=r},535:function(e,n,o){e.exports="\x3c!-- "+(o(27),o(536),o(31),' --\x3e\n\n<input type="hidden" name="type" data-bind="value: \'')+o(5).PostType.SessionApproval+'\'" />\n<input type="hidden" name="request" data-bind="value: svr.sCtx" />\n<input type="hidden" name="mfaLastPollStart" data-bind="value: currentPollStartTime" />\n<input type="hidden" name="mfaLastPollEnd" data-bind="value: currentPollEndTime" />\n\n\x3c!-- ko if: twoWayPollingNeeded --\x3e\n    \x3c!-- ko if: isCompanionApp --\x3e\n        <input type="hidden" data-bind="attr: { name: svr.sAuthMethodInputFieldName }, value: \''+o(2).AuthMethods.CompanionAppsNotification+'\'" />\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: isCompanionApp --\x3e\n        <input type="hidden" data-bind="attr: { name: svr.sAuthMethodInputFieldName }, value: \''+o(2).AuthMethods.PhoneAppNotification+'\'" />\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n<div id="idDiv_SAOTCAS_Title" class="row text-title" role="heading" aria-level="1" data-bind="text: title"></div>\n<div class="row text-body">\n    \x3c!-- Hide the Authenticator app icon on MSA to make the view app-generic and enable push notifications for all apps --\x3e\n    \x3c!-- This icon hiding should NOT be removed during feature flag cleanup since we still want to show it on ESTS --\x3e\n    \x3c!-- ko ifnot: svr.fShowPushNotifications --\x3e\n        <div data-bind="component: { name: \'proof-image-control\', params: { type: PROOF.Type.TOTPAuthenticatorV2, small: true, animate: true } }"></div>\n    \x3c!-- /ko --\x3e\n    <div class="text-block-body overflow-hidden">\n        <div id="idDiv_SAOTCAS_Description" data-bind="htmlWithBindings: description, childBindings: { \'idSpan_SAOTCAS_DescSessionID\': { css: { \'bold\': true } } }"></div>\n        \x3c!-- ko if: description2 --\x3e\n        <div id="idDiv_RichContext_Description" class="richtext-description" data-bind="text: description2"></div>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\x3c!-- ko if: displaySign --\x3e\n<div class="section">\n    <div class="row text-body">\n      \x3c!-- ko if: svr.fActivateKeyboardFocusOnApprovalNumber --\x3e\n      <div class="display-sign-container">\n        <div tabindex="0"\n          aria-labelledby="idDiv_SAOTCAS_Description idRichContext_DisplaySign"\n          id="idRichContext_DisplaySign"\n          class="displaySign"\n          data-bind="text: displaySign, hasFocusEx: focusOnSign()"></div>\n      </div>\n      \x3c!-- /ko --\x3e\n      \x3c!-- ko ifnot: svr.fActivateKeyboardFocusOnApprovalNumber --\x3e\n      <div id="idRichContext_DisplaySign" class="displaySign" data-bind="text: displaySign"></div>\n      \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n<div class="row text-body">\n    <div class="richtext-warning" data-bind="text: str[\'CT_SAOTCRC_STR_Missing_Numbers\']"></div>\n</div>\n\x3c!-- /ko --\x3e\n\n<div>\n    \x3c!-- ko if: doPolling --\x3e\n    <span data-bind="component: { name: \'session-polling-control\',\n        publicMethods: sessionPollingInterface,\n        params: {\n            serverData: svr,\n            pollingInterval: svr.iPollingInterval,\n            pollingTimeout: svr.iPollingTimeout,\n            sessionIdentifier: sessionIdentifier,\n            pollingType: pollingType },\n        event: {\n            load: sessionPollingField_onLoad,\n            sessionTimeout: sessionPollingField_onSessionTimeOut,\n            sessionDenied: sessionPollingField_onSessionDenied,\n            sessionApproved: sessionPollingField_onSessionApproved } }">\n    </span>\n    \x3c!-- /ko --\x3e\n</div>\n\n<div data-bind="css: { \'position-buttons\': !tenantBranding.BoilerPlateText }">\n    <div class="row">\n        <div class="row no-margin-top-bottom" data-bind="visible: tdCheckbox.isShown">\n            <div class="col-md-24 form-group no-margin-top checkbox">\n                <label id="idLbl_SAOTCAS_TD_Cb">\n                    \x3c!-- Set attr binding before hasFocusEx to prevent Narrator from losing focus --\x3e\n                    \x3c!-- ko if: svr.fActivateKeyboardFocusOnApprovalNumber --\x3e\n                    <input id="idChkBx_SAOTCAS_TD" type="checkbox" value="true" data-bind="\n                        attr: { name: svr.sTrustedDeviceCheckboxName },\n                        ariaLabel: str[\'CT_SAOTCAS_STR_AddTD\'],\n                        ariaDescribedBy: [\'idDiv_SAOTCAS_Title\', \'idDiv_SAOTCAS_Description\'].concat(description2 ? [\'idDiv_RichContext_Description\'] : []).join(\' \'),\n                        hasFocusEx: tdCheckbox.isShown && !focusOnSign(),\n                        checked: tdCheckbox.isChecked,\n                        disable: tdCheckbox.isDisabled">\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko ifnot: svr.fActivateKeyboardFocusOnApprovalNumber --\x3e\n                    <input id="idChkBx_SAOTCAS_TD" type="checkbox" value="true" data-bind="\n                        attr: { name: svr.sTrustedDeviceCheckboxName },\n                        ariaLabel: str[\'CT_SAOTCAS_STR_AddTD\'],\n                        ariaDescribedBy: [\'idDiv_SAOTCAS_Title\', \'idDiv_SAOTCAS_Description\'].concat(description2 ? [\'idDiv_RichContext_Description\'] : []).join(\' \'),\n                        hasFocusEx: tdCheckbox.isShown,\n                        checked: tdCheckbox.isChecked,\n                        disable: tdCheckbox.isDisabled">\n                    \x3c!-- /ko --\x3e\n                    <span data-bind="text: str[\'CT_SAOTCAS_STR_AddTD\']"></span>\n                </label>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-md-24">\n                <div class="text-13">\n                    \x3c!-- ko if: showSwitchProofsLink --\x3e\n                      \x3c!-- ko if: svr.fActivateKeyboardFocusOnApprovalNumber --\x3e\n                      <div id="idDiv_SAOTCS_HavingTrouble" class="form-group"\n                          data-bind="\n                              css: { \'no-margin-bottom\': !svr.urlMoreInfo },\n                              htmlWithBindings: toggleText,\n                              childBindings: {\n                                  \'signInAnotherWay\': {\n                                      click: switchToOtcRequest_onClick,\n                                      hasFocusEx: !tdCheckbox.isShown && !focusOnSign(),\n                                      ariaDescribedBy: [\'idDiv_SAOTCAS_Title\', \'idDiv_SAOTCAS_Description\'].concat(description2 ? [\'idDiv_RichContext_Description\'] : []).join(\' \') } }">\n                      </div>\n                      \x3c!-- /ko --\x3e\n                      \x3c!-- ko ifnot: svr.fActivateKeyboardFocusOnApprovalNumber --\x3e\n                      <div id="idDiv_SAOTCS_HavingTrouble" class="form-group"\n                          data-bind="\n                              css: { \'no-margin-bottom\': !svr.urlMoreInfo },\n                              htmlWithBindings: toggleText,\n                              childBindings: {\n                                  \'signInAnotherWay\': {\n                                      click: switchToOtcRequest_onClick,\n                                      hasFocusEx: !tdCheckbox.isShown,\n                                      ariaDescribedBy: [\'idDiv_SAOTCAS_Title\', \'idDiv_SAOTCAS_Description\'].concat(description2 ? [\'idDiv_RichContext_Description\'] : []).join(\' \') } }">\n                      </div>\n                      \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: svr.urlMoreInfo --\x3e\n                    <div class="form-group no-margin-bottom">\n                        <a id="moreInfoUrl" target="_blank" href="#" data-bind="text: str[\'CT_STR_More_Info\'], href: svr.urlMoreInfo, ariaLabel: str[\'CT_STR_More_Info_AriaLabel\']"></a>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="win-button-pin-bottom" data-bind="css : { \'boilerplate-button-bottom\': tenantBranding.BoilerPlateText }">\n        <div class="row" data-bind="css: { \'move-buttons\': tenantBranding.BoilerPlateText }">\n            <div data-bind="component: { name: \'footer-buttons-field\',\n                params: {\n                    serverData: svr,\n                    isPrimaryButtonVisible: false,\n                    isSecondaryButtonVisible: !showSwitchProofsLink,\n                    secondaryButtonText: str[\'CT_SAOTCC_STR_Cancel\'] },\n                event: {\n                    secondaryButtonClick: secondaryButton_onClick } }">\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- ko if: tenantBranding.BoilerPlateText --\x3e\n<div id="idBoilerPlateText" class="wrap-content boilerplate-text" data-bind="\n    htmlWithMods: tenantBranding.BoilerPlateText,\n    htmlMods: { filterLinks: svr.fIsHosted },\n    css: { \'transparent-lightbox\': tenantBranding.UseTransparentLightBox }"></div>\n\x3c!-- /ko --\x3e'},536:function(e,n,o){var i=o(1),t=o(0),s=o(16),r=o(5),l=o(4),a=o(3),d=o(9),c=o(482),p=o(8),u=o(7),g=window,v=t.QueryString,S=r.SessionPollingType,T=a.DateTime,h=c.RetryableError,f=c.NonRetryableError;function m(e){var n=this,o={Approved:1,Invalid:2,Denied:2},t={Pending:1,Complete:2},a=0,g=1,m=2,b=3,C=6,_=0,x=1,A=2,w=3,P=6,k=7,y=null,I=e.serverData,R=e.sessionIdentifier,O=e.pollingInterval?1e3*e.pollingInterval:5e3,D=e.pollingTimeout?1e3*e.pollingTimeout:6e4,E=e.sessionIdentifierType,B=e.pollingType,F=!!e.sendSessionIdentifierType&&e.sendSessionIdentifierType,M=e.maxPollingErrors,N=I.iMaxPollErrors||5,L=I.urlSessionState,V=I.sUnauthSessionID,q=!1!==I.fCheckApiCanary,U=I.fUpdateSessionPollingLogic,H=I.fIsVerifiableCredentialsSupportEnabled;function K(){var e=n.pollImage.getImage();if(!e)return!1;n.pollImage.show();var i=e.width,s=e.height;if(n.pollImage.hide(),s===t.Pending){if(i===o.Invalid)throw new h("invalidSession")}else if(s===t.Complete){if(i===o.Approved)return!0;if(i===o.Denied)throw new f("denied")}return!1}function W(e){if(!e)throw new h("noResponse");switch(e.AuthorizationState){case a:return!1;case m:return!H||!e.flowToken||n.onSessionApproved(e.flowToken);case g:throw new f("denied");case C:if(H&&e.flowToken)return n.onSessionVisited(),!1;break;case b:default:throw new h("invalidSession")}}function J(e){if(!e)throw new h("noResponse");switch(e.SessionState){case x:case k:return!1;case A:return!0;case P:return n.onSessionVisited(e.Code),!1;case w:throw new f("denied");case _:default:throw new h("invalidSession")}}function j(){return n.useJsonPolling?new p((function(e,n){var o={DeviceCode:R},i="";H&&"VC"===E?(o={DeviceCode:R()},i=L,i=v.appendOrReplace(i,"slkt",E)):F?(i=v.appendOrReplace(L,"slk",R),i=v.appendOrReplace(i,"slkt",E)):i=v.appendOrReplace(L,"code",R),new s({checkApiCanary:q,notifyOnClientAbort:!0}).Json({url:i,eventId:u.EventIds.Api_CheckSessionState},o,e,n,r.DefaultRequestTimeout)})).then(F?J:W,(function(e){var n=e.error||{isFatal:!0,code:"getSessionStateError"};if(!n.isFatal)throw new h(n.code);throw new f(n.code)})):new p((function(e,o){var i=T.getCurrentTime(),t=v.appendOrReplace(L,"slk",R);t=v.appendOrReplace(t,"dt",i),t=v.appendOrReplace(t,"uaid",V),E&&(t=v.appendOrReplace(t,"slkt",E)),n.pollImage.resolvePromise=e,n.pollImage.rejectPromise=o,n.pollImage.id("iRetrievedState"+i),n.pollImage.src(t),n.pollImage.reset()})).then(K)}n.onSessionTimeout=l.create(),n.onSessionDenied=l.create(),n.onSessionApproved=l.create(),n.onSessionVisited=l.create(),n.useJsonPolling=B===S.Json,n.pollImage={resolvePromise:null,rejectPromise:null,id:i.observable(),src:i.observable(),width:i.observable(),height:i.observable(),visible:i.observable(!1),visibility:i.pureComputed((function(){return n.pollImage.visible()?"hidden":""})),show:function(){n.pollImage.visible(!0)},hide:function(){n.pollImage.visible(!1)},getImage:i.pureComputed((function(){return document.getElementById(n.pollImage.id())})),reset:function(){n.pollImage.width(null),n.pollImage.height(null)}},n.dispose=function(){n.stopPolling()},n.startPolling=function(e){e&&(R=e),n.stopPolling(),d.throwUnhandledExceptionOnRejection(y.pollAsync().then(n.onSessionApproved,(function(e){e instanceof f&&"denied"===e.errorCode?n.onSessionDenied():n.onSessionTimeout()})))},n.stopPolling=function(){y.stopPolling(),n.useJsonPolling||n.pollImage.hide()},n.evt_PollingImage_onload=function(){n.pollImage.resolvePromise()},n.evt_PollingImage_onerror=function(){n.pollImage.rejectPromise()},H&&(N=M||N),y=new c({apiRequestCallBack:j,pollingIntervalMilliseconds:O,maxPollErrors:N,pollingTimeoutMilliseconds:D,updateSessionPollingLogic:U})}i.components.register("session-polling-control",{viewModel:m,template:o(537),synchronous:!g.ServerData.iMaxStackForKnockoutAsyncComponents||t.Helper.isStackSizeGreaterThan(g.ServerData.iMaxStackForKnockoutAsyncComponents),enableExtensions:!0}),e.exports=m},537:function(e,n){e.exports='\x3c!-- ko ifnot: useJsonPolling --\x3e\n<img data-bind="\n    attr:\n    {\n        id: pollImage.id,\n        src: pollImage.src,\n        width: pollImage.width,\n        height: pollImage.height\n    },\n    visible: pollImage.visible,\n    style: { visibility: pollImage.visibility },\n    event:\n    {\n        load: evt_PollingImage_onload,\n        error: evt_PollingImage_onerror\n    }" />\n\x3c!-- /ko --\x3e'}}]),window.__convergedsa_sessionapproval_9a830715096d0fede217=!0;
//# sourceMappingURL=../9a830715096d0fede217.map